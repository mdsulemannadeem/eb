<%- include('./partials/marquee') %> 
<%- include('./partials/header') %>

<!-- Include cart scripts -->
<script src="/javascripts/cart-wishlist.js" defer></script>

<!-- Hero section with responsive image -->
<div class="hero-section w-full relative mb-4 sm:mb-6 md:mb-8">
  <div class="relative overflow-hidden">
    <img class="w-full h-[50vh] sm:h-[60vh] md:h-[70vh] lg:h-[80vh] xl:h-[90vh] object-cover" 
         src="/images/cover1.jpg" 
         alt="Hero Image" />
    <!-- Optional overlay content -->
  
  </div>
</div>


<!-- Products section with responsive grid -->
<div class="w-full py-4 sm:py-6 md:py-8 px-4 sm:px-6 md:px-8 lg:px-12 flex flex-col gap-4 sm:gap-6">
  <!-- Product Type Filter Controls -->
  <div class="flex flex-wrap justify-center gap-2 sm:gap-3 mb-4 sm:mb-6">
    <a href="/"
       class="px-3 sm:px-4 py-2 text-xs sm:text-sm md:text-base rounded-full <%= activeType === 'all' ? 'bg-red-500 text-white' : 'bg-gray-200 text-gray-700' %> transition-colors hover:bg-red-400 whitespace-nowrap">
      All Musical Instrument
    </a>
    <% productTypes.forEach(function(type) { %>
    <a href="/?type=<%= encodeURIComponent(type) %>"
       class="px-3 sm:px-4 py-2 text-xs sm:text-sm md:text-base rounded-full <%= activeType === type ? 'bg-red-500 text-white' : 'bg-gray-200 text-gray-700' %> transition-colors hover:bg-red-400 whitespace-nowrap">
      <%= type %>
    </a>
    <% }); %>
  </div>

  <!-- Product Count Display -->
  <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 gap-2">
    <h2 class="text-lg sm:text-xl md:text-2xl font-semibold text-center sm:text-left">
      <% if(activeType !== 'all') { %> 
        <%= activeType %> (<%= products.length %>)
      <% } else { %> 
        All Products (<%= products.length %>)
      <% } %>
    </h2>
  </div>

  <!-- Product Grid -->
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-5">
    <% products.forEach(function(pro) { %>
      <!-- Enhanced Product Card -->
      <div class="group bg-white rounded-xl overflow-hidden shadow-md hover:shadow-xl transition-all duration-300 flex flex-col h-full">
        <!-- Product Image Area with Gradient Background -->
        <div class="relative p-3 flex items-center justify-center bg-gradient-to-br from-[<%= pro.bgcolor %>] to-[<%= pro.bgcolor %>]/80 h-48 sm:h-52 overflow-hidden">
          <a href="/product-show/<%= pro._id %>" class="block w-full h-full">
            <img class="w-full h-full object-contain transition-all duration-300 group-hover:scale-105"
                 src="data:image/jpeg;base64,<%= pro.image && pro.image[0] ? Buffer.from(pro.image[0]).toString('base64') : '' %>"
                 alt="<%= pro.name %>"
                 loading="lazy" />
          </a>
          
          <!-- Quick view overlay (appears on hover) -->
          <div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-black/5">
            <a href="/product-show/<%= pro._id %>" class="bg-white/80 backdrop-blur-sm px-4 py-2 rounded-full text-gray-800 font-medium hover:bg-white transition-colors shadow-sm">
              View Details
            </a>
          </div>
        </div>
        
        <!-- Product Info Area -->
        <div class="flex-1 flex flex-col p-4 bg-[<%= pro.panelcolor %>] text-[<%= pro.textcolor %>] relative">
          <!-- Product Type Badge -->
          <div class="absolute -top-3 left-3">
            <span class="inline-block text-xs px-2 py-1 bg-black/20 rounded-full shadow-sm">
              <%= pro.productType %>
            </span>
          </div>
          
          <!-- Product Details -->
          <div class="mt-2">
            <h3 class="font-medium text-sm sm:text-base truncate mb-1"><%= pro.name %></h3>
            <div class="flex items-center gap-2 mb-3">
              <% if (pro.discount && pro.discount > 0) { %>
                <span class="font-bold text-lg" data-price="<%= pro.price %>">₹<%= pro.price - pro.discount %></span>
                <span class="text-sm line-through opacity-70">₹<%= pro.price %></span>
              <% } else { %>
                <span class="font-bold text-lg" data-price="<%= pro.price %>">₹<%= pro.price %></span>
              <% } %>
              
              <% if (pro.discount && pro.discount > 0) { %>
                <span class="text-xs px-2 py-0.5 bg-red-100 text-red-700 rounded-full">
                  Save ₹<%= pro.discount %>
                </span>
              <% } %>
            </div>
          </div>
          
          <!-- Action Button -->
          <div class="flex justify-end mt-auto pt-2">
            <!-- Add to Cart Button -->
            <% if (loggedin) { %>
              <button onclick="addToCart('<%= pro._id %>')"
                      class="add-to-cart-btn flex items-center justify-center gap-1 bg-gradient-to-r from-red-500 to-red-600 text-white px-3 py-1.5 rounded-full shadow-sm hover:shadow-md transition-all hover:-translate-y-0.5"
                      data-product-id="<%= pro._id %>">
                <i class="ri-shopping-cart-line text-sm"></i>
                <span class="text-sm font-medium">Add to Cart</span>
              </button>
            <% } else { %>
              <a class="flex items-center justify-center gap-1 bg-gradient-to-r from-red-500 to-red-600 text-white px-3 py-1.5 rounded-full shadow-sm hover:shadow-md transition-all hover:-translate-y-0.5"
                 href="/?showLogin=true">
                <i class="ri-shopping-cart-line text-sm"></i>
                <span class="text-sm font-medium">Add to Cart</span>
              </a>
            <% } %>
          </div>
        </div>
        
        <!-- Bottom animation bar -->
        <div class="h-0.5 w-0 group-hover:w-full bg-gradient-to-r from-red-500 to-red-600 transition-all duration-300"></div>
      </div>
    <% }); %>
  </div>

 
</div>


<!-- Video section - responsive -->
<div class="videosection mb-6 sm:mb-8 mt-6 sm:mt-8 px-4 sm:px-6 md:px-8 lg:px-12 w-full">
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6 lg:gap-8">
    <div class="border border-black-200 rounded-lg h-48 sm:h-64 md:h-80 lg:h-96 overflow-hidden cursor-pointer video-container relative group"
         data-video-src="/images/video1.mp4">
      <video class="h-full w-full object-cover group-hover:scale-105 transition-transform duration-300"
             autoplay muted loop
             src="/images/video1.mp4"
             loading="lazy"></video>
      <div class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-20 group-hover:bg-opacity-30 transition-all duration-300">
        <span class="bg-white bg-opacity-75 group-hover:bg-opacity-90 p-2 sm:p-3 rounded-full transition-all duration-300">
          <i class="ri-play-fill text-xl sm:text-2xl text-red-500"></i>
        </span>
      </div>
    </div>
    
    <div class="border border-black-200 rounded-lg h-48 sm:h-64 md:h-80 lg:h-96 overflow-hidden cursor-pointer video-container relative group"
         data-video-src="/images/vid2.mp4">
      <video class="h-full w-full object-cover group-hover:scale-105 transition-transform duration-300"
             autoplay muted loop
             src="/images/vid2.mp4"
             loading="lazy"></video>
      <div class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-20 group-hover:bg-opacity-30 transition-all duration-300">
        <span class="bg-white bg-opacity-75 group-hover:bg-opacity-90 p-2 sm:p-3 rounded-full transition-all duration-300">
          <i class="ri-play-fill text-xl sm:text-2xl text-red-500"></i>
        </span>
      </div>
    </div>
    
    <div class="border border-black-200 rounded-lg h-48 sm:h-64 md:h-80 lg:h-96 overflow-hidden cursor-pointer video-container relative group"
         data-video-src="/images/vid3.mp4">
      <video class="h-full w-full object-cover group-hover:scale-105 transition-transform duration-300"
             autoplay muted loop
             src="/images/vid3.mp4"
             loading="lazy"></video>
      <div class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-20 group-hover:bg-opacity-30 transition-all duration-300">
        <span class="bg-white bg-opacity-75 group-hover:bg-opacity-90 p-2 sm:p-3 rounded-full transition-all duration-300">
          <i class="ri-play-fill text-xl sm:text-2xl text-red-500"></i>
        </span>
      </div>
    </div>
    
    <div class="border border-black-200 rounded-lg h-48 sm:h-64 md:h-80 lg:h-96 overflow-hidden cursor-pointer video-container relative group"
         data-video-src="/images/vid4.mp4">
      <video class="h-full w-full object-cover group-hover:scale-105 transition-transform duration-300"
             autoplay muted loop
             src="/images/vid4.mp4"
             loading="lazy"></video>
      <div class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-20 group-hover:bg-opacity-30 transition-all duration-300">
        <span class="bg-white bg-opacity-75 group-hover:bg-opacity-90 p-2 sm:p-3 rounded-full transition-all duration-300">
          <i class="ri-play-fill text-xl sm:text-2xl text-red-500"></i>
        </span>
      </div>
    </div>
  </div>
</div>

<!-- Carousel section - responsive height -->
<div class="whoweare w-full relative mb-16 sm:mb-20 md:mb-24 overflow-hidden">
  <!-- Slide 1 -->
  <div id="couresel1" class="w-full relative h-[60vh] sm:h-[70vh] md:h-[80vh] lg:h-[90vh] mb-8 sm:mb-12 md:mb-16">
    <!-- Background image with gradient overlay -->
    <div class="absolute inset-0">
      <img class="w-full h-full object-cover" src="/images/s1.jpg" alt="Eastern Banjo craftsmanship" />
      <div class="absolute inset-0 bg-gradient-to-r from-black/40 to-black/10"></div>
    </div>
    
    <!-- Content card with glass morphism -->
    <div class="absolute inset-0 flex items-center justify-center p-4">
      <div class="relative text-center backdrop-blur-sm bg-white/80 p-6 sm:p-8 md:p-10 
                  rounded-xl shadow-2xl border border-white/20 
                  transform transition-all duration-500 
                  max-w-xs sm:max-w-md md:max-w-lg lg:max-w-xl">
        
        <!-- Decorative accent -->
        <div class="absolute -top-2 left-1/2 transform -translate-x-1/2 w-20 h-1 bg-red-500 rounded-full"></div>
        
        <h1 class="text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold text-gray-900 mt-2">
          Who <span class="text-red-500">We Are</span>
        </h1>
        
        <p class="text-gray-800 text-sm sm:text-base md:text-lg leading-relaxed mt-3 sm:mt-4 md:mt-5">
         Eastern Banjo, based in Ranchi, Jharkhand, crafts premium banjos and traditional Indian string instruments, combining artistic design with lasting quality and rich sound.
        </p>
        
        <a href="/shop" class="inline-block mt-4 sm:mt-5 md:mt-6 px-6 py-2.5 rounded-full
                             bg-gradient-to-r from-red-500 to-red-600 
                             text-white font-medium
                             hover:shadow-lg hover:-translate-y-1 
                             transform transition-all duration-300">
          Learn More
        </a>
      </div>
    </div>
  </div>

  <!-- Slide 2 -->
  <div id="couresel2" class="w-full relative h-[60vh] sm:h-[70vh] md:h-[80vh] lg:h-[90vh] mb-8 sm:mb-12 md:mb-16">
    <!-- Background image with gradient overlay -->
    <div class="absolute inset-0">
      <img class="w-full h-full object-cover" src="/images/img1.jpg" alt="Eastern Banjo mission" />
      <div class="absolute inset-0 bg-gradient-to-r from-black/40 to-black/10"></div>
    </div>
    
    <!-- Content card with glass morphism -->
    <div class="absolute inset-0 flex items-center justify-center p-4">
      <div class="relative text-center backdrop-blur-sm bg-white/80 p-6 sm:p-8 md:p-10 
                  rounded-xl shadow-2xl border border-white/20 
                  transform transition-all duration-500 
                  max-w-xs sm:max-w-md md:max-w-lg lg:max-w-xl">
        
        <!-- Decorative accent -->
        <div class="absolute -top-2 left-1/2 transform -translate-x-1/2 w-20 h-1 bg-red-500 rounded-full"></div>
        
        <h1 class="text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold text-gray-900 mt-2">
          Our <span class="text-red-500">Mission</span>
        </h1>
        
        <p class="text-gray-800 text-sm sm:text-base md:text-lg leading-relaxed mt-3 sm:mt-4 md:mt-5">
          At Eastern Banjo, we craft high-quality, innovative banjos and Indian string instruments that blend tradition with modern design, inspiring musicians across generations.

        </p>
        
        <a href="/" class="inline-block mt-4 sm:mt-5 md:mt-6 px-6 py-2.5 rounded-full
                          bg-gradient-to-r from-red-500 to-red-600 
                          text-white font-medium
                          hover:shadow-lg hover:-translate-y-1 
                          transform transition-all duration-300">
          About Us
        </a>
      </div>
    </div>
  </div>

  <!-- Slide 3 -->
  <div id="couresel3" class="w-full relative h-[60vh] sm:h-[70vh] md:h-[80vh] lg:h-[90vh] mb-8 sm:mb-12 md:mb-16">
    <!-- Background image with gradient overlay -->
    <div class="absolute inset-0">
      <img class="w-full h-full object-cover" src="/images/s2.jpg" alt="Eastern Banjo products" />
      <div class="absolute inset-0 bg-gradient-to-r from-black/40 to-black/10"></div>
    </div>
    
    <!-- Content card with glass morphism -->
    <div class="absolute inset-0 flex items-center justify-center p-4">
      <div class="relative text-center backdrop-blur-sm bg-white/80 p-6 sm:p-8 md:p-10 
                  rounded-xl shadow-2xl border border-white/20 
                  transform transition-all duration-500 
                  max-w-xs sm:max-w-md md:max-w-lg lg:max-w-xl">
        
        <!-- Decorative accent -->
        <div class="absolute -top-2 left-1/2 transform -translate-x-1/2 w-20 h-1 bg-red-500 rounded-full"></div>
        
        <h1 class="text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold text-gray-900 mt-2">
          Our <span class="text-red-500">Products</span>
        </h1>
        
        <p class="text-gray-800 text-sm sm:text-base md:text-lg leading-relaxed mt-3 sm:mt-4 md:mt-5">
         Based in Ranchi, we manufacture premium banjos and accessories in 60+ vibrant designs, including Bulbul Tarang and Swarmandal Banjo, using top-quality wood and materials.
        </p>
        
        <a href="/shop" class="inline-block mt-4 sm:mt-5 md:mt-6 px-6 py-2.5 rounded-full
                             bg-gradient-to-r from-red-500 to-red-600 
                             text-white font-medium
                             hover:shadow-lg hover:-translate-y-1 
                             transform transition-all duration-300">
          Shop Now
        </a>
      </div>
    </div>
  </div>
</div>

<!-- Testimonials section -->
<div id="testimonials" class="bg-gray-100 py-8 sm:py-12 md:py-16">
  <div class="container mx-auto px-4 sm:px-6 md:px-8">
    <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-center mb-6 sm:mb-8 md:mb-12">
      What Our Customers Say
    </h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 md:gap-8">
      <!-- Testimonial 1 -->
      <div class="bg-white shadow-md rounded-lg p-4 sm:p-6 hover:shadow-lg transition-shadow">
        <p class="text-gray-700 italic text-sm sm:text-base mb-4 leading-relaxed">
          "THANKYOU EASTERN BANJO.. SIR AAP JO BANJO HAME BNA KR DIYE HO USME
          ITNA QUALITY HAI JITNA HM SOCHE THE USSE KAHI JYADA HAI OR ITNA KAM
          PRICE ME BEST BANJO AAPNE HAME DIYE HO USKE LIYA DIL SE THANKS
          BHAIII...✌️✌️ LO PRICE ME BEST BANJO EASTERN SHOP ME..........
        </p>
        <div class="flex items-center">
          <img src="/images/person.png"
               alt="Customer 1"
               class="w-10 h-10 sm:w-12 sm:h-12 rounded-full" />
          <div class="ml-3 sm:ml-4">
            <h4 class="font-bold text-sm sm:text-base">YOGESH PATEL</h4>
            <p class="text-xs sm:text-sm text-gray-500">Verified Buyer</p>
            <!-- Star Rating -->
            <div class="flex items-center mt-1 sm:mt-2">
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Testimonial 2 -->
      <div class="bg-white shadow-md rounded-lg p-4 sm:p-6 hover:shadow-lg transition-shadow">
        <p class="text-gray-700 italic text-sm sm:text-base mb-4 leading-relaxed">
          "Eastern Banjo blend tradition with modern innovative to create
          instrument & elevate musical performance, sence of aesthetics
          alongside super quality."
        </p>
        <div class="flex items-center">
          <img src="/images/person2.png"
               alt="Customer 2"
               class="w-10 h-10 sm:w-12 sm:h-12 rounded-full" />
          <div class="ml-3 sm:ml-4">
            <h4 class="font-bold text-sm sm:text-base">Krishna Mohan</h4>
            <p class="text-xs sm:text-sm text-gray-500">Verified Buyer</p>
            <!-- Star Rating -->
            <div class="flex items-center mt-1 sm:mt-2">
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Testimonial 3 -->
      <div class="bg-white shadow-md rounded-lg p-4 sm:p-6 hover:shadow-lg transition-shadow">
        <p class="text-gray-700 italic text-sm sm:text-base mb-4 leading-relaxed">
          "Eastern banjo is a super professional banjo. Perfect tone. And
          Sweet sound."
        </p>
        <div class="flex items-center">
          <img src="/images/person3.png"
               alt="Customer 3"
               class="w-10 h-10 sm:w-12 sm:h-12 rounded-full" />
          <div class="ml-3 sm:ml-4">
            <h4 class="font-bold text-sm sm:text-base">Muzahid Haque</h4>
            <p class="text-xs sm:text-sm text-gray-500">Verified Buyer</p>
            <!-- Star Rating -->
            <div class="flex items-center mt-1 sm:mt-2">
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Testimonial 4 -->
      <div class="bg-white shadow-md rounded-lg p-4 sm:p-6 hover:shadow-lg transition-shadow">
        <p class="text-gray-700 italic text-sm sm:text-base mb-4 leading-relaxed">
          "Fabulous Banjos with Pakka Sur & Amazing Sound"
        </p>
        <div class="flex items-center">
          <img src="/images/person4.png"
               alt="Customer 4"
               class="w-10 h-10 sm:w-12 sm:h-12 rounded-full" />
          <div class="ml-3 sm:ml-4">
            <h4 class="font-bold text-sm sm:text-base">VMK</h4>
            <p class="text-xs sm:text-sm text-gray-500">Verified Buyer</p>
            <!-- Star Rating -->
            <div class="flex items-center mt-1 sm:mt-2">
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Testimonial 5 -->
      <div class="bg-white shadow-md rounded-lg p-4 sm:p-6 hover:shadow-lg transition-shadow">
        <p class="text-gray-700 italic text-sm sm:text-base mb-4 leading-relaxed">
          "कम दाम में अच्छा समान मिलता है aur wo bhi Pro. Fessional"
        </p>
        <div class="flex items-center">
          <img src="/images/person5.png"
               alt="Customer 5"
               class="w-10 h-10 sm:w-12 sm:h-12 rounded-full" />
          <div class="ml-3 sm:ml-4">
            <h4 class="font-bold text-sm sm:text-base">Shailesh prajapati</h4>
            <p class="text-xs sm:text-sm text-gray-500">Verified Buyer</p>
            <!-- Star Rating -->
            <div class="flex items-center mt-1 sm:mt-2">
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Testimonial 6 -->
      <div class="bg-white shadow-md rounded-lg p-4 sm:p-6 hover:shadow-lg transition-shadow">
        <p class="text-gray-700 italic text-sm sm:text-base mb-4 leading-relaxed">
          "Best banjo seller in india and also good delivery."
        </p>
        <div class="flex items-center">
          <img src="/images/person6.png"
               alt="Customer 6"
               class="w-10 h-10 sm:w-12 sm:h-12 rounded-full" />
          <div class="ml-3 sm:ml-4">
            <h4 class="font-bold text-sm sm:text-base">SAMEER DHUMAL</h4>
            <p class="text-xs sm:text-sm text-gray-500">Verified Buyer</p>
            <!-- Star Rating -->
            <div class="flex items-center mt-1 sm:mt-2">
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
              <i class="ri-star-fill text-yellow-500 text-xs sm:text-sm"></i>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Instagram Reel-Style Video Player Modal -->
<div id="videoModal" class="fixed inset-0 z-50 hidden">
  <!-- Dark overlay -->
  <div class="absolute inset-0 bg-black bg-opacity-90 backdrop-blur-sm"></div>
  
  <!-- Reel-style modal content -->
  <div class="relative z-10 w-full h-full flex items-center justify-center">
    <!-- Navigation buttons -->
    <button id="prevVideoBtn" class="absolute left-2 sm:left-4 z-30 text-white bg-black/30 hover:bg-black/50 backdrop-filter backdrop-blur-sm rounded-full p-2 sm:p-3 transition-all">
      <i class="ri-arrow-left-s-line text-xl sm:text-2xl md:text-3xl"></i>
    </button>
    
    <button id="nextVideoBtn" class="absolute right-2 sm:right-4 z-30 text-white bg-black/30 hover:bg-black/50 backdrop-filter backdrop-blur-sm rounded-full p-2 sm:p-3 transition-all">
      <i class="ri-arrow-right-s-line text-xl sm:text-2xl md:text-3xl"></i>
    </button>
    
    <!-- Close button -->
    <button id="closeVideoBtn" class="absolute top-2 sm:top-4 right-2 sm:right-4 text-white bg-red-500 hover:bg-red-600 rounded-full p-2 transition-all z-20">
      <i class="ri-close-line text-lg sm:text-xl md:text-2xl"></i>
    </button>
    
    <!-- Video player with Instagram Reel-style container -->
    <div class="video-player-container relative h-[80vh] sm:h-[85vh] max-w-xs sm:max-w-sm md:max-w-md mx-4">
      <!-- Glowing border effect -->
      <div class="absolute -inset-1 bg-gradient-to-r from-purple-600 via-pink-500 to-blue-500 rounded-2xl sm:rounded-3xl opacity-75 blur"></div>
      
      <!-- Video element in vertical format -->
      <div class="relative bg-black rounded-xl sm:rounded-2xl overflow-hidden h-full">
        <video id="modalVideo" class="h-full w-full object-contain" controls autoplay>
          <source src="" type="video/mp4">
          Your browser does not support the video tag.
        </video>
        
        <!-- Progress bar at top -->
        <div class="absolute top-0 left-0 w-full h-1 bg-white/20">
          <div id="videoProgressBar" class="h-full bg-red-500 w-0"></div>
        </div>
        
        <!-- Instagram-style video info overlay at bottom -->
        <div class="absolute bottom-0 left-0 w-full bg-gradient-to-t from-black to-transparent py-3 sm:py-4 px-3 sm:px-4">
          <div class="flex justify-between items-center">
            <div>
              <h3 id="modalVideoTitle" class="text-white text-base sm:text-lg font-bold"></h3>
              <p class="text-white/70 text-xs sm:text-sm">Eastern Banjo</p>
            </div>
            
            <!-- Instagram-style actions -->
            <div class="flex flex-col items-center gap-3 sm:gap-4">
              <button class="text-white">
                <i class="ri-heart-line text-xl sm:text-2xl"></i>
              </button>
              <button class="text-white">
                <i class="ri-share-forward-line text-xl sm:text-2xl"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- All JavaScript remains the same but with responsive considerations -->
<script>

// Add to cart function
function addToCart(productId) {
    fetch(`/addtocart/${productId}`, {
        method: 'GET',
        headers: { 
            'Accept': 'application/json',
            'X-Requested-With': 'XMLHttpRequest'
        },
        credentials: 'same-origin'
    })
    .then(response => {
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        return response.json();
    })
    .then(data => {
        if (data.success) {
            // Update cart count in header
            if (typeof window.updateCartCount === 'function') {
                window.updateCartCount(data.cartCount);
            }
            // Show success message
            showToast('Product added to cart!', 'success');
        } else if (data.requiresLogin) {
            // Redirect to login if required
            window.location.href = '/?showLogin=true';
        } else {
            showToast(data.message || 'Failed to add to cart', 'error');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        showToast('Error adding to cart. Please try again.', 'error');
    });
}

// Toast notification function
function showToast(message, type = 'info') {
    const toast = document.createElement('div');
    const bgColor = type === 'success' ? 'bg-green-500' : 
                   type === 'error' ? 'bg-red-500' : 'bg-blue-500';
    
    toast.className = `fixed top-5 right-5 px-4 py-2 rounded-lg z-50 ${bgColor} text-white shadow-lg`;
    toast.textContent = message;
    document.body.appendChild(toast);
    
    // Auto remove after 3 seconds
    setTimeout(() => {
        if (toast.parentNode) {
            toast.remove();
        }
    }, 3000);
}

// Carousel configuration
const carouselConfig = {
    autoSlideInterval: 5000, // Time between slides in ms
    transitionSpeed: 1500, // Transition speed in ms
    slideElementIds: ["couresel1", "couresel2", "couresel3"],
};

// Carousel functionality (same as before but with responsive considerations)
document.addEventListener("DOMContentLoaded", function () {
    // Initialize variables
    let currentSlide = 0;
    const slides = carouselConfig.slideElementIds.map((id) =>
        document.getElementById(id)
    );
    let autoSlideTimer;

    // Create and append control elements
    function initializeCarousel() {
        // First ensure all slides except the first one are hidden
        slides.forEach((slide, index) => {
            if (index === 0) {
                slide.style.display = "block";
                slide.style.opacity = "1";
            } else {
                slide.style.display = "none";
                slide.style.opacity = "0";
            }
        });

        // Create controls container
        const carousel = document.querySelector(".whoweare");
        const controlsContainer = document.createElement("div");
        controlsContainer.className =
            "carousel-controls absolute bottom-2 sm:bottom-4 md:bottom-8 left-1/2 transform -translate-x-1/2 flex items-center gap-2 sm:gap-3 md:gap-4";

        // Create prev button
        const prevBtn = document.createElement("button");
        prevBtn.className =
            "prev-btn bg-white text-black p-1 sm:p-2 rounded-full shadow-lg hover:bg-gray-100 transition-colors";
        prevBtn.innerHTML = '<i class="ri-arrow-left-s-line text-lg sm:text-xl"></i>';
        prevBtn.addEventListener("click", prevSlide);

        // Create dots container
        const dotsContainer = document.createElement("div");
        dotsContainer.className = "carousel-dots flex gap-1 sm:gap-2";

        // Create next button
        const nextBtn = document.createElement("button");
        nextBtn.className =
            "next-btn bg-white text-black p-1 sm:p-2 rounded-full shadow-lg hover:bg-gray-100 transition-colors";
        nextBtn.innerHTML = '<i class="ri-arrow-right-s-line text-lg sm:text-xl"></i>';
        nextBtn.addEventListener("click", nextSlide);

        // Add all elements to DOM
        controlsContainer.appendChild(prevBtn);
        controlsContainer.appendChild(dotsContainer);
        controlsContainer.appendChild(nextBtn);
        carousel.appendChild(controlsContainer);

        // Create dot indicators
        slides.forEach((_, index) => {
            const dot = document.createElement("div");
            dot.classList.add(
                "carousel-dot",
                "w-2", "h-2", "sm:w-3", "sm:h-3",
                "rounded-full",
                "cursor-pointer",
                "transition-colors"
            );
            dot.classList.add(index === 0 ? "bg-red-500" : "bg-gray-300");
            dot.addEventListener("click", () => goToSlide(index));
            dotsContainer.appendChild(dot);
        });

        // Start auto-sliding
        startAutoSlide();
    }

    // Navigation functions (same as before)
    function goToSlide(index) {
        const oldSlide = slides[currentSlide];
        currentSlide = index;
        if (currentSlide < 0) currentSlide = slides.length - 1;
        if (currentSlide >= slides.length) currentSlide = 0;
        const newSlide = slides[currentSlide];

        // Update dots
        document.querySelectorAll(".carousel-dot").forEach((dot, i) => {
            if (i === currentSlide) {
                dot.classList.add("bg-red-500");
                dot.classList.remove("bg-gray-300");
            } else {
                dot.classList.add("bg-gray-300");
                dot.classList.remove("bg-red-500");
            }
        });

        // Animate transition
        oldSlide.style.opacity = "0";
        setTimeout(() => {
            oldSlide.style.display = "none";
            newSlide.style.display = "block";
            setTimeout(() => {
                newSlide.style.opacity = "1";
            }, 50);
        }, carouselConfig.transitionSpeed);

        // Reset auto-slide timer
        restartAutoSlide();
    }

    function nextSlide() {
        goToSlide(currentSlide + 1);
    }

    function prevSlide() {
        goToSlide(currentSlide - 1);
    }

    // Auto-slide functions
    function startAutoSlide() {
        autoSlideTimer = setInterval(nextSlide, carouselConfig.autoSlideInterval);
    }

    function restartAutoSlide() {
        clearInterval(autoSlideTimer);
        startAutoSlide();
    }

    // Add CSS for transitions
    const style = document.createElement("style");
    style.innerHTML = `
        #couresel1, #couresel2, #couresel3 {
            transition: opacity ${carouselConfig.transitionSpeed}ms ease-in-out;
        }
        .carousel-dot {
            transition: background-color 0.3s;
        }
        
        /* Responsive carousel content */
        @media (max-width: 640px) {
            .content {
                width: 90%;
                padding: 15px;
            }
        }
    `;
    document.head.appendChild(style);

    // Initialize the carousel
    initializeCarousel();
});

// Make product image data available to the hover script
window.productImages = {
    <% products.forEach(function(pro) { %>
        "<%= pro._id %>": [
            // First image (already showing)
            "data:image/jpeg;base64,<%= pro.image && pro.image[0] ? Buffer.from(pro.image[0]).toString('base64') : '' %>",
            
            // Second image (for hover)
            "data:image/jpeg;base64,<%= pro.image && pro.image[1] ? Buffer.from(pro.image[1]).toString('base64') : (pro.image && pro.image[0] ? Buffer.from(pro.image[0]).toString('base64') : '') %>"
        ],
    <% }); %>
};

// Product hover effect (same as before)
document.addEventListener('DOMContentLoaded', function() {
    // Get all product images
    const productLinks = document.querySelectorAll('.product-image-container');
    
    productLinks.forEach(link => {
        const img = link.querySelector('img');
        if (!img) return;
        
        // Store the original image data
        const originalImageData = img.src;
        
        // Get product ID to find the right data
        const productId = link.getAttribute('data-product-id');
        
        link.addEventListener('mouseenter', function() {
            // Get the product data from our array
            const product = window.productImages && window.productImages[productId];
            
            // If we have a second image, change to it
            if (product && product.length > 1) {
                img.src = product[1]; // Show second image
            }
        });
        
        link.addEventListener('mouseleave', function() {
            // Restore original image
            img.src = originalImageData;
        });
    });
});

// Video modal functionality (enhanced for responsiveness)
document.addEventListener('DOMContentLoaded', function() {
    // Elements
    const videoModal = document.getElementById('videoModal');
    const modalVideo = document.getElementById('modalVideo');
    const modalVideoTitle = document.getElementById('modalVideoTitle');
    const closeVideoBtn = document.getElementById('closeVideoBtn');
    const prevVideoBtn = document.getElementById('prevVideoBtn');
    const nextVideoBtn = document.getElementById('nextVideoBtn');
    const videoContainers = document.querySelectorAll('.video-container');
    const videoProgressBar = document.getElementById('videoProgressBar');
    
    // Video gallery data
    const videos = [
        { src: '/images/video1.mp4' },
        { src: '/images/vid2.mp4'},
        { src: '/images/vid3.mp4'},
        { src: '/images/vid4.mp4' }
    ];
    
    let currentVideoIndex = 0;
    
    // Add click handler to all video containers
    videoContainers.forEach((container, index) => {
        container.addEventListener('click', function() {
            const videoSrc = this.getAttribute('data-video-src');
            openVideoModal(videoSrc, index);
        });
    });
    
    // Close modal when clicking close button
    closeVideoBtn.addEventListener('click', closeVideoModal);
    
    // Close modal when clicking outside the video container
    videoModal.addEventListener('click', function(e) {
        if (e.target === videoModal || e.target === videoModal.firstElementChild) {
            closeVideoModal();
        }
    });
    
    // Previous video button
    prevVideoBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        currentVideoIndex = (currentVideoIndex - 1 + videos.length) % videos.length;
        changeVideo(videos[currentVideoIndex]);
    });
    
    // Next video button
    nextVideoBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        currentVideoIndex = (currentVideoIndex + 1) % videos.length;
        changeVideo(videos[currentVideoIndex]);
    });
    
    // Track video progress for progress bar
    modalVideo.addEventListener('timeupdate', function() {
        if (modalVideo.duration) {
            const percentage = (modalVideo.currentTime / modalVideo.duration) * 100;
            videoProgressBar.style.width = `${percentage}%`;
        }
    });
    
    // Reset progress bar when video changes
    modalVideo.addEventListener('loadedmetadata', function() {
        videoProgressBar.style.width = '0%';
    });
    
    // Open video modal function
    function openVideoModal(videoSrc, index) {
        if (index !== undefined) {
            currentVideoIndex = index;
        }
        
        // Set video source and play
        modalVideo.src = videoSrc;
        modalVideo.load();
        modalVideoTitle.textContent = videos[currentVideoIndex].title;
        
        // Show modal with animation
        videoModal.classList.remove('hidden');
        
        // Make video container enter with animation
        const videoContainer = document.querySelector('.video-player-container');
        videoContainer.classList.add('modal-enter');
        
        // Play video without mute
        modalVideo.muted = false;
        const playPromise = modalVideo.play();
        
        if (playPromise !== undefined) {
            playPromise.catch(error => {
                console.log('Auto-play was prevented:', error);
            });
        }
        
        // Add keyboard event listener
        document.addEventListener('keydown', handleKeyPress);
    }
    
    // Change video function
    function changeVideo(videoData) {
        // Add a short fade effect
        modalVideo.classList.add('opacity-50');
        
        modalVideo.src = videoData.src;
        modalVideo.load();
        modalVideoTitle.textContent = videoData.title;
        
        // Reset progress bar
        videoProgressBar.style.width = '0%';
        
        // Play and restore opacity
        modalVideo.play().catch(e => console.log('Autoplay blocked'));
        setTimeout(() => {
            modalVideo.classList.remove('opacity-50');
        }, 300);
    }
    
    // Close video modal function
    function closeVideoModal() {
        // Pause video
        modalVideo.pause();
        
        // Add exit animation to container
        const videoContainer = document.querySelector('.video-player-container');
        videoContainer.classList.remove('modal-enter');
        videoContainer.classList.add('modal-exit');
        
        // Hide modal after animation
        setTimeout(() => {
            videoModal.classList.add('hidden');
            videoContainer.classList.remove('modal-exit');
            
            // Reset video source to prevent continued playback
            modalVideo.src = '';
        }, 300);
        
        // Remove keyboard event listener
        document.removeEventListener('keydown', handleKeyPress);
    }
    
    // Handle keyboard events
    function handleKeyPress(e) {
        if (e.key === 'Escape') {
            closeVideoModal();
        } else if (e.key === 'ArrowLeft') {
            prevVideoBtn.click();
        } else if (e.key === 'ArrowRight') {
            nextVideoBtn.click();
        } else if (e.key === ' ') {
            // Space bar toggles play/pause
            e.preventDefault();
            if (modalVideo.paused) {
                modalVideo.play();
            } else {
                modalVideo.pause();
            }
        }
    }
});
</script>

<style>
/* Enhanced responsive styles */
@media (max-width: 475px) {
    .xs\:grid-cols-2 {
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }
}

/* Animations for modal */
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes fadeOut {
    from { opacity: 1; }
    to { opacity: 0; }
}

.animate-fadeIn {
    animation: fadeIn 0.3s forwards;
}

.animate-fadeOut {
    animation: fadeOut 0.3s forwards;
}

/* Enhance video thumbnails with hover effects */
.video-container {
    position: relative;
    overflow: hidden;
    transition: transform 0.3s ease;
}

.video-container:hover {
    transform: scale(1.03);
}

.video-container::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(to top, rgba(0,0,0,0.6) 0%, transparent 50%);
    pointer-events: none;
}

/* Focus styles for accessibility */
button:focus-visible {
    outline: 2px solid white;
    outline-offset: 2px;
}

/* Enhanced modal animations */
.modal-enter {
    animation: modalEnter 0.3s forwards;
}

.modal-exit {
    animation: modalExit 0.3s forwards;
}

@keyframes modalEnter {
    from { transform: translateY(50px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

@keyframes modalExit {
    from { transform: translateY(0); opacity: 1; }
    to { transform: translateY(50px); opacity: 0; }
}

/* Improve navigation button hover effects */
#prevVideoBtn, #nextVideoBtn {
    transition: transform 0.2s, background-color 0.2s;
}

#prevVideoBtn:hover {
    transform: translateX(-3px);
}

#nextVideoBtn:hover {
    transform: translateX(3px);
}

/* Responsive text truncation */
.truncate-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/* Responsive grid improvements */
@media (min-width: 1536px) {
    .xl\:grid-cols-5 {
        grid-template-columns: repeat(5, minmax(0, 1fr));
    }
}

/* Journey section responsive improvements */
@media (max-width: 768px) {
    .journey-step {
        text-align: center;
    }
    
    .journey-step h3 {
        margin-bottom: 1rem;
    }
}

/* Testimonials responsive grid */
@media (max-width: 640px) {
    .testimonial-grid {
        grid-template-columns: 1fr;
    }
}

@media (min-width: 641px) and (max-width: 1023px) {
    .testimonial-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (min-width: 1024px) {
    .testimonial-grid {
        grid-template-columns: repeat(3, 1fr);
    }
}

/* Fade-in animation for content */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Add slight shadow to highlight text */
.whoweare h1 {
  text-shadow: 0 1px 2px rgba(0,0,0,0.1);
}

/* Enhance carousel transitions */
#couresel1, #couresel2, #couresel3 {
  opacity: 1;
  transition: opacity 1.5s ease-in-out;
}

/* Subtle animations */
.group:hover {
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
}

/* Fade in animation for product cards */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.grid > div {
  animation: fadeIn 0.5s ease-out forwards;
}

/* Staggered animations */
.grid > div:nth-child(1) { animation-delay: 0.1s; }
.grid > div:nth-child(2) { animation-delay: 0.15s; }
.grid > div:nth-child(3) { animation-delay: 0.2s; }
.grid > div:nth-child(4) { animation-delay: 0.25s; }
.grid > div:nth-child(5) { animation-delay: 0.3s; }
/* Continue for more items if needed */
</style>

<%- include('./partials/footer') %>
<link href="https://cdn.jsdelivr.net/npm/remixicon/fonts/remixicon.css" rel="stylesheet" />
